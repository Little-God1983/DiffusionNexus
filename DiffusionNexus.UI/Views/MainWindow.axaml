<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:DiffusionNexus.UI.ViewModels"
        xmlns:local="using:DiffusionNexus.UI.Views"
        x:Class="DiffusionNexus.UI.Views.MainWindow"
        Width="1100" Height="700"
        Icon="/Assets/avalonia-logo.ico"
        Title="DiffusionNexus.UI"
        >

  <Window.DataContext>
    <vm:MainWindowViewModel/>
  </Window.DataContext>

  <SplitView IsPaneOpen="{Binding IsMenuOpen}"
             DisplayMode="CompactOverlay"
             CompactPaneLength="60"
             OpenPaneLength="200"
             PanePlacement="Left">
    <!-- Sidebar Pane -->
    <SplitView.Pane>
      <StackPanel VerticalAlignment="Stretch" Spacing="10" Margin="0,10">
        <!-- Hamburger toggle -->
        <Button Content="☰" Command="{Binding ToggleMenuCommand}" HorizontalAlignment="Left"/>

        <!-- Module buttons -->
        <ItemsControl Items="{Binding Modules}">
          <ItemsControl.ItemTemplate>
            <DataTemplate>
              <Button Command="{Binding DataContext.ChangeModuleCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                      CommandParameter="{Binding}">
                <StackPanel Orientation="Horizontal" Spacing="10">
                  <Image Source="{Binding Icon}" Width="24" Height="24"/>
                  <TextBlock Text="{Binding Name}"
                             IsVisible="{Binding DataContext.IsMenuOpen, RelativeSource={RelativeSource AncestorType=Window}}"/>
                </StackPanel>
              </Button>
            </DataTemplate>
          </ItemsControl.ItemTemplate>
        </ItemsControl>

        <StackPanel VerticalAlignment="Bottom" Spacing="5" Margin="0,40,0,0">
          <Button Content="YouTube" Command="{Binding OpenYoutubeCommand}"/>
          <Button Content="Civitai" Command="{Binding OpenCivitaiCommand}"/>
          <Button Content="⚙ Settings" Command="{Binding OpenSettingsCommand}"/>
        </StackPanel>
      </StackPanel>
    </SplitView.Pane>

    <!-- Main content area -->
    <SplitView.Content>
      <ContentControl Content="{Binding CurrentModuleView}"/>
    </SplitView.Content>
  </SplitView>
</Window>