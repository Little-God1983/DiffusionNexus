<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:DiffusionNexus.UI.ViewModels"
             xmlns:controls="using:DiffusionNexus.UI.Views.Controls"
             xmlns:conv="using:DiffusionNexus.UI.Converters"
             x:Class="DiffusionNexus.UI.Views.Controls.DuplicateResultControl"
             x:DataType="vm:LoraHelperViewModel">
  <UserControl.Resources>
    <conv:BooleanToBrushConverter x:Key="BoolBrush" />
  </UserControl.Resources>
  <StackPanel Margin="10" Spacing="5">
    <TextBlock Text="{Binding ScanHeadline}" FontWeight="Bold"/>
    <TextBlock Text="Click on the columns to select entries for keeping" FontStyle="Italic"/>
    <DataGrid ItemsSource="{Binding DuplicateItems}" AutoGenerateColumns="False" HeadersVisibility="Column" Margin="0,5,0,0">
      <DataGrid.Columns>
        <DataGridTemplateColumn Header="File A">
          <DataGridTemplateColumn.CellTemplate>
            <DataTemplate x:DataType="vm:DuplicateItemViewModel">
              <Button Command="{Binding ToggleKeepACommand}" BorderBrush="Gray" BorderThickness="0"
                      Background="{Binding KeepA, Converter={StaticResource BoolBrush}}">
                <Button.Content>
                  <TextBlock Text="{Binding FileA.Name}"/>
                </Button.Content>
              </Button>
            </DataTemplate>
          </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
        <DataGridTemplateColumn Header="File B">
          <DataGridTemplateColumn.CellTemplate>
            <DataTemplate x:DataType="vm:DuplicateItemViewModel">
              <Button Command="{Binding ToggleKeepBCommand}" BorderBrush="Gray" BorderThickness="0"
                      Background="{Binding KeepB, Converter={StaticResource BoolBrush}}">
                <Button.Content>
                  <TextBlock Text="{Binding FileB.Name}"/>
                </Button.Content>
              </Button>
            </DataTemplate>
          </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
        <DataGridTextColumn Header="Size (MB)" Binding="{Binding SizeMb}"/>
      </DataGrid.Columns>
    </DataGrid>
  </StackPanel>
</UserControl>
