<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="using:DiffusionNexus.UI.Views.Dialogs"
        x:Class="DiffusionNexus.UI.Views.Dialogs.FileDropDialog"
        x:DataType="local:FileDropDialog"
        Width="500"
        Height="400"
        WindowStartupLocation="CenterOwner"
        CanResize="False"
        Background="#252526">
  
  <Grid RowDefinitions="Auto,*,Auto">
    
    <!-- Title -->
    <TextBlock Grid.Row="0" 
               Text="{Binding DialogTitle}"
               FontSize="18"
               FontWeight="SemiBold"
               Foreground="#D4A574"
               HorizontalAlignment="Center"
               Margin="0,16,0,16"/>
    
    <!-- Drop Zone -->
    <Border Grid.Row="1" 
            x:Name="DropZone"
            Margin="20,0,20,0"
            CornerRadius="8"
            BorderThickness="2"
            BorderBrush="#666"
            Background="#1A1A1A"
            DragDrop.AllowDrop="True">
      
      <Grid>
        <!-- Empty State (no files yet) -->
        <StackPanel IsVisible="{Binding !HasFiles}"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Center"
                    Spacing="12">
          <TextBlock Text="??" 
                     FontSize="48" 
                     HorizontalAlignment="Center"
                     Opacity="0.5"/>
          <TextBlock Text="Drag and drop files here, or click to select files"
                     Foreground="#888"
                     HorizontalAlignment="Center"/>
        </StackPanel>
        
        <!-- File List (when files are added) -->
        <Grid IsVisible="{Binding HasFiles}" RowDefinitions="*,Auto">
          <ScrollViewer Grid.Row="0" Padding="8">
            <ItemsControl ItemsSource="{Binding SelectedFiles}">
              <ItemsControl.ItemTemplate>
                <DataTemplate x:DataType="local:SelectedFileItem">
                  <Border Background="#2A2A2A" 
                          CornerRadius="4" 
                          Padding="8,4" 
                          Margin="0,2">
                    <Grid ColumnDefinitions="*,Auto">
                      <TextBlock Grid.Column="0" 
                                 Text="{Binding FileName}"
                                 VerticalAlignment="Center"
                                 TextTrimming="CharacterEllipsis"/>
                      <Button Grid.Column="1"
                              Content="X"
                              Padding="4,2"
                              Background="Transparent"
                              Click="OnRemoveFileClick"
                              Tag="{Binding}"/>
                    </Grid>
                  </Border>
                </DataTemplate>
              </ItemsControl.ItemTemplate>
            </ItemsControl>
          </ScrollViewer>
          
          <TextBlock Grid.Row="1" 
                     Text="{Binding FileCountText}"
                     FontSize="12"
                     Opacity="0.6"
                     HorizontalAlignment="Center"
                     Margin="0,4"/>
        </Grid>
        
        <!-- Clickable overlay for file picker -->
        <Button x:Name="BrowseButton"
                Background="Transparent"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                Opacity="0"
                Click="OnBrowseClick"
                Cursor="Hand"/>
      </Grid>
    </Border>
    
    <!-- Buttons -->
    <Border Grid.Row="2" 
            Background="#1E1E1E"
            Padding="20,12"
            Margin="0,16,0,0">
      <StackPanel Orientation="Horizontal" 
                  HorizontalAlignment="Right" 
                  Spacing="8">
        <Button Content="Cancel" 
                Width="80"
                Click="OnCancelClick"/>
        <Button Content="Done" 
                Width="80"
                IsEnabled="{Binding HasFiles}"
                Click="OnDoneClick"/>
      </StackPanel>
    </Border>
    
  </Grid>
</Window>