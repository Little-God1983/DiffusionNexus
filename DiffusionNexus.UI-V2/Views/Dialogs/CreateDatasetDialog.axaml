<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="using:DiffusionNexus.UI.Views.Dialogs"
        xmlns:vm="using:DiffusionNexus.UI.ViewModels"
        xmlns:enums="using:DiffusionNexus.Domain.Enums"
        x:Class="DiffusionNexus.UI.Views.Dialogs.CreateDatasetDialog"
        x:DataType="vm:CreateDatasetDialogViewModel"
        Width="450"
        SizeToContent="Height"
        WindowStartupLocation="CenterOwner"
        CanResize="False"
        Background="#252526">
  
  <Grid Margin="24" RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto">
    
    <!-- Title -->
    <TextBlock Grid.Row="0" 
               Text="Create New Dataset"
               FontSize="18"
               FontWeight="SemiBold"
               Foreground="#D4A574"
               Margin="0,0,0,20"/>
    
    <!-- Name Input (Required) -->
    <StackPanel Grid.Row="1" Margin="0,0,0,16">
      <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
        <TextBlock Text="Name"
                   FontWeight="SemiBold"/>
        <TextBlock Text=" *" Foreground="#F44336"/>
      </StackPanel>
      <TextBox x:Name="NameTextBox"
               Text="{Binding Name, Mode=TwoWay}"
               Watermark="Enter dataset name (2+ characters)..."
               Classes.error="{Binding NameError, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
      <TextBlock Text="{Binding NameError}"
                 Foreground="#F44336"
                 FontSize="12"
                 Margin="0,4,0,0"
                 IsVisible="{Binding NameError, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
    </StackPanel>
    
    <!-- Category Dropdown (Optional) -->
    <StackPanel Grid.Row="2" Margin="0,0,0,16">
      <TextBlock Text="Category (Optional)"
                 FontWeight="SemiBold"
                 Margin="0,0,0,8"/>
      <ComboBox ItemsSource="{Binding AvailableCategories}"
                SelectedItem="{Binding SelectedCategory}"
                PlaceholderText="Select a category..."
                HorizontalAlignment="Stretch">
        <ComboBox.ItemTemplate>
          <DataTemplate x:DataType="vm:DatasetCategoryViewModel">
            <TextBlock Text="{Binding Name}"/>
          </DataTemplate>
        </ComboBox.ItemTemplate>
      </ComboBox>
    </StackPanel>
    
    <!-- Type Dropdown (Optional) -->
    <StackPanel Grid.Row="3" Margin="0,0,0,16">
      <TextBlock Text="Type (Optional)"
                 FontWeight="SemiBold"
                 Margin="0,0,0,8"/>
      <ComboBox ItemsSource="{Binding AvailableTypes}"
                SelectedItem="{Binding SelectedType}"
                PlaceholderText="Select a type..."
                HorizontalAlignment="Stretch">
        <ComboBox.ItemTemplate>
          <DataTemplate x:DataType="enums:DatasetType">
            <TextBlock Text="{Binding Converter={x:Static local:DatasetTypeConverter.Instance}}"/>
          </DataTemplate>
        </ComboBox.ItemTemplate>
      </ComboBox>
    </StackPanel>
    
    <!-- NSFW Checkbox -->
    <StackPanel Grid.Row="4" Margin="0,0,0,20">
      <CheckBox IsChecked="{Binding IsNsfw, Mode=TwoWay}"
                Content="Contains NSFW Content"
                ToolTip.Tip="Mark this dataset as containing Not Safe For Work content"/>
    </StackPanel>
    
    <!-- Info Text -->
    <Border Grid.Row="5" 
            Background="#1A1A1A" 
            CornerRadius="8" 
            Padding="12"
            Margin="0,0,0,20">
      <TextBlock Text="The dataset will be created with a V1 folder for versioned structure."
                 Opacity="0.7"
                 FontSize="12"
                 TextWrapping="Wrap"/>
    </Border>
    
    <!-- Buttons -->
    <StackPanel Grid.Row="6" 
                Orientation="Horizontal" 
                HorizontalAlignment="Right" 
                Spacing="8">
      <Button Content="Cancel" 
              Width="100"
              Click="OnCancelClick"/>
      <Button Content="Create" 
              Width="100"
              Background="#2D7D46"
              IsEnabled="{Binding IsValid}"
              IsDefault="True"
              Click="OnCreateClick"/>
    </StackPanel>
    
  </Grid>
</Window>